<div class="calculator">
  <h1 class="mat-h1">DOTS Calculator</h1>
  <div class="calculator-body">
    <div class="calculator-inputs">
      <mat-button-toggle-group value="LB" [(ngModel)]="units">
        <mat-button-toggle value="LB">Pounds (LB)</mat-button-toggle>
        <mat-button-toggle value="KG">Kilograms (KG)</mat-button-toggle>
      </mat-button-toggle-group>
      <br />
      <br />
      <mat-form-field>
        <mat-label>Bodyweight</mat-label>
        <input matInput #bwInput type="number" min="0" [(ngModel)]="bw" />
      </mat-form-field>
      <br />
      <mat-slide-toggle [(ngModel)]="splitInputs"
        >Input Individual Lifts</mat-slide-toggle
      >
      <br />
      <br />
      <div *ngIf="!splitInputs; else splitInputFields">
        <mat-form-field>
          <mat-label>Total</mat-label>
          <input matInput type="number" min="0" [(ngModel)]="total" />
        </mat-form-field>
      </div>
      <ng-template #splitInputFields>
        <mat-form-field>
          <mat-label>Squat</mat-label>
          <input
            matInput
            type="number"
            min="0"
            [max]="MAX_WEIGHT"
            [(ngModel)]="squat"
          />
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Bench</mat-label>
          <input
            matInput
            type="number"
            min="0"
            [max]="MAX_WEIGHT"
            [(ngModel)]="bench"
          />
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Deadlift</mat-label>
          <input
            matInput
            type="number"
            min="0"
            [max]="MAX_WEIGHT"
            [(ngModel)]="deadlift"
          />
        </mat-form-field>
      </ng-template>
      <br />
      <mat-button-toggle-group value="M" [(ngModel)]="sex">
        <mat-button-toggle value="M">Male</mat-button-toggle>
        <mat-button-toggle value="F">Female</mat-button-toggle>
      </mat-button-toggle-group>
      <br />
      <br />
      <button mat-flat-button color="accent" (click)="calculate()">
        Calculate!
      </button>
    </div>
    <div class="calculator-results" *ngIf="calculated">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Results</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <h3 class="mat-h3">DOTS: {{ dots.toFixed(2) }}</h3>
          <mat-card *ngIf="splitInputs">
            <mat-card-header>
              <mat-card-subtitle>Jeff Nippard Progression</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <h3 class="mat-h3">
                Squat Level: {{ CATEGORIES[squatLevelIndex] }} ({{ squatRatio.toFixed(2)}}x)
              </h3>
              <h4 class="mat-h4">{{ squatProgress.toFixed(2) }}% progression</h4>
              <mat-progress-bar
                color="accent"
                [value]="squatProgress"
              ></mat-progress-bar>
              <br />
              <h3 class="mat-h3">
                Bench Level: {{ CATEGORIES[benchLevelIndex] }} ({{ benchRatio.toFixed(2)}}x)
              </h3>
              <h4 class="mat-h4">{{ benchProgress.toFixed(2) }}% progression</h4>
              <mat-progress-bar
                color="accent"
                [value]="benchProgress"
              ></mat-progress-bar>
              <br />
              <h3 class="mat-h3">
                Deadlift Level: {{ CATEGORIES[deadliftLevelIndex] }} ({{ deadliftRatio.toFixed(2)}}x)
              </h3>
              <h4 class="mat-h4">{{ deadliftProgress.toFixed(2) }}% progression</h4>
              <mat-progress-bar
                color="accent"
                [value]="deadliftProgress"
              ></mat-progress-bar>
            </mat-card-content>
          </mat-card>
        </mat-card-content>
        <mat-card-actions align="end">
          <button mat-button>LIKE</button>
          <button mat-button>SHARE</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
